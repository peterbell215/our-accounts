<%# The <tr> now serves as the target for Turbo Stream replacements %>
<tr class="transaction-row" id="<%= dom_id(transaction) %>">
      <%= form_for transaction do |form| %> <%# Removed data-turbo-frame %>
        <td data-date="<%= transaction.date.iso8601 %>" data-dateinlocale-target="date">
          <%= transaction.date.strftime('%d/%m/%Y') %> <%# Initial content, will be replaced by controller %>
        </td>
        <td><%= transaction.description %></td>
        <td>
          <%# Select tag for category, using Stimulus controller for dynamic updates %>
          <%= form.select :category_id,
                          options_from_collection_for_select(@categories, :id, :name, transaction.category_id),
                          { include_blank: true },
                          { class: "pure-input-1-2" } %>
        </td>
        <td><%= transaction.other_party&.name %></td>
        <td class="<%= transaction.amount_pence.positive? ? 'positive' : 'negative' %> currency">
          <%= humanized_money_with_symbol transaction.amount %>
        </td>
        <td class="<%= transaction.balance_pence.positive? ? 'positive' : 'negative' %> currency">
          <%= humanized_money_with_symbol transaction.balance if transaction.balance %>
        </td>
        <td>
          <%= form.submit "Save", class: "pure-button pure-button-primary" %>
        </td>
      <% end %> <%# form_for %>
</tr>
